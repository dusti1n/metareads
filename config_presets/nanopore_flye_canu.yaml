# metareads; configuration file: nanopore_flye_canu.yaml

# General settings for the pipeline
general:
  filename: input_data/sample_folder # Directory containing input data files
  output_dir: project_name # Project name of output directory for results
  units: units.tsv # Units file with sample metadata and file paths
  dag_plot: true  # Set to true to generate a DAG visualization of the workflow (default: true)
  dag_config: config_presets/nanopore_flye_canu.yaml  # Path to config for DAG generation

# Settings for data type and resource management
settings:
  data_type: nanopore # Data type: illumina, nanopore, or hybrid
  threads: 10 # Number of CPU cores for processing
  memory: 30000 # RAM in MB (1GB=1000MB)
  busco_lineage: "eukaryota_odb10" # Lineage for BUSCO analysis; see list: https://busco.ezlab.org/list_of_lineages.html

# READS_QUALITY; Quality settings for Illumina, Nanopore, and hybrid data types
reads_quality:
  multiqc: false # Enable or disable FastQC and MultiQC (Illumina, Hybrid)
  nanoplot: true # Enable or disable NanoPlot (Nanopore, Hybrid)

# READS_TRIM; Preprocessing settings before assembly (adapter trimming, quality filtering)
reads_trim:
  # Cutadapt settings (Illumina, Hybrid)
  cutadapt:
    min_length: 0 # Minimum read length after trimming (default: 0)
    quality_cut_off: 20 # Quality trimming from both ends (Phred cutoff, default: 20)
    overlap: 3 # Minimum overlap length with adapter for trimming (default: 3)
    times: 1 # Maximum times to remove adapters from a read (default: 1)
    adapter_r1: AGATCGGAAGAGCACACGTCTGAACTCCAGTCAC # Forward adapter (_R1)
    adapter_r2: AGATCGGAAGAGCGTCGTGTAGGGAAAGAGTGT # Reverse adapter (_R2)

  # Porechop settings (Nanopore, Hybrid)
  porechop:
    adapter_threshold: 95 # Match confidence (%) to identify adapters (default: 95)
    middle_threshold: 75 # Match confidence (%) for middle adapter (default: 75)


# Supported assemblers by data type:
# [illumina]: Spades, MEGAHIT
# [nanopore]: Flye, Canu
# [hybrid]: Hybrid_Spades, Flye

# ASSEMBLER; for [illumina], [nanopore] and [hybrid] data types
# NOTE: Enable only 1–2 assemblers per selected data type
assembler:
# Flye; for [nanopore] and [hybrid] data types
  flye:
    status: true # Enable or disable FLYE
    genome_size: "12m" # Set genome size
    iterations: 2 # Polishing rounds (Higher accuracy: 5, Default: 2)
    meta: true # Activate metagenome mode in Flye (default: true)

# Canu; for [nanopore] data type
  canu:
    status: true # Enable or disable CANU
    genome_size: "5m" # Set genome size
    stop_on_low_coverage: "" # Canu defaults to 10 if not set
    min_input_coverage: "" # Canu defaults to 0 if not set

# Spades; for [illumina] data type
# Hybrid_Spades; for [hybrid] data type
  spades:
    status: false # Enable or disable Spades or Hybrid_Spades
    meta: true # Use metagenome mode in Spades (Illumina-only; not compatible with Hybrid_Spades) (default: true)

# MEGAHIT; for [illumina] data type
# NOTE: Available preset options: default, manual, meta-sensitive, meta-large, large, fast
  megahit:
    status: false # Enable or disable MEGAHIT
    preset: "meta-sensitive" # Set to a preset name (e.g., meta-sensitive), or "manual" to use custom k-mer values below
    min_contig_len: 200 # Minimum length of contigs to output, default 200
    min_count: 2 # Minimum multiplicity for filtering (k_min+1)-mers, default 2
    k_min: 21 # Minimum kmer size (<= 127), must be odd number, default 21
    k_max: 99 # Maximum kmer size (<= 127), must be odd number, default 99
    k_step: 20 # Increment of kmer size of each iteration (<= 28), must be even number, default 20


# READS_POLISH; Post-assembly polishing settings
reads_polish:
  # Pilon settings for [illumina] and [hybrid] data types
  # Optional: uncomment or change to customize (otherwise defaults will be used)
  pilon:
    fix: "all" # Type of corrections: all, snps, indels, gaps, local (default: all)
    diploid: false # Use diploid mode (default: false)
    mindepth: 0.1 # Min. read depth to consider a position (default: 0.1)
    minmq: 0 # Min. mapping quality (0–60) (default: 0)
    minqual: 0 # Min. base quality (Phred) (default: 0)
    chunksize: 10000000 # Max bp per processing chunk (default: 10000000)

  # Racon settings for [nanopore] and [hybrid] data types
  racon:
    iterations: 1 # Racon rounds (default: 1, use 1–3 for higher accuracy)
    quality_threshold: 10 # Minimum base quality (Phred) to include in consensus (default: 10)
    match_score: 8 # Score for matching bases (default: 8)
    mismatch_penalty: -6 # Penalty for mismatching bases (default: -6)
